// Bitcoind Tapset.

// Path of the bitcoind executable.
@define BITCOIND
%(
  "bitcoind"
%)

probe bitcoin.init_main = process(@BITCOIND).mark("init_main") {
  datadir = user_string($arg1)
  config = user_string($arg2)
}

probe bitcoin.cache_flush = process(@BITCOIND).mark("cache_flush") {
  coins = $arg1
  bytes = $arg2
}

probe bitcoin.cache_hit = process(@BITCOIND).mark("cache_hit") {}

probe bitcoin.cache_miss = process(@BITCOIND).mark("cache_miss") {}

probe bitcoin.finish_ibd = process(@BITCOIND).mark("finish_ibd") {}

probe bitcoin.read_block_from_disk = process(@BITCOIND).mark("read_block_from_disk") {
  height = $arg1
  filenum = $arg2
}

probe bitcoin.update_tip = process(@BITCOIND).mark("update_tip") {
  block = user_string($arg1)
  height = $arg2
  cache_size = $arg3
  cache_bytes = $arg4
  progress = $arg5
}
